<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <%= csrf_meta_tag %>
    <%= render 'layouts/stylesheets' %>
    <%#= javascript_include_tag :defaults %>
    <script src="https://assets1.github.com/javascripts/jquery/jquery-1.4.2.min.js?a744052a694df58e53007f6eddfca1014e72c580" type="text/javascript"></script>
    <script src="http://js.pusherapp.com/1.7/pusher.min.js" type="text/javascript"></script>
  	<script type="text/javascript">
	    // Enable pusher logging - don't include this in production
	    Pusher.log = function() {
	      if (window.console) window.console.log.apply(window.console, arguments);
	    };
	
	    // Flash fallback logging - don't include this in production
	    WEB_SOCKET_DEBUG = true;
	
	    var pusher = new Pusher('90f6559f5192ab317c82');
	    var channel = pusher.subscribe('xenda-jarvis-99714');
	    channel.bind('create', function(data) {
	    	pusher_message = '<div class="pusher_message round">'+data.content+'</div>';
	    	$('div.pusher_message.round').detach();
	    	$('body').append(pusher_message);
	    	$('div.pusher_message').live('click', function(){
	    		$(this).detach();
	    	});
	    });
  	</script>
  </head>
  <body>
    <div class="container">
      <%= render 'layouts/header' %>
      <section class="round">
      	<% flash.each do |key, value| %>
      		<%= content_tag(:div, value, :class=> "flash #{key}") %>
      	<% end %>
        <%= yield %>
      </section>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html>
